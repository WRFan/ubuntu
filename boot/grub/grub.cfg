#
# DO NOT EDIT THIS FILE! It is automatically generated by grub-mkconfig using templates from
# /etc/grub.d
# and settings from
# /etc/default/grub

# grub modules:
# /boot/grub/i386-pc

function recordfail
{
	set recordfail=1

	if [ -n "${have_grubenv}" ]; then
		if [ -z "${boot_once}" ]; then
			save_env recordfail;
		fi;
	fi
}

#function load_video
#{
	#if [ x$feature_all_video_module = xy ]; then
		#insmod all_video
	#else
		#insmod efi_gop
		#insmod efi_uga
		#insmod ieee1275_fb
		#insmod vbe
		#insmod vga
		#insmod video_bochs
		#insmod video_cirrus
	#fi
#}

#function gfxmode
#{
	#set gfxpayload="${1}"

	#if [ "${1}" = "keep" ]; then
		#set vt_handoff=vt.handoff=7
	#else
		#set vt_handoff=
	#fi
#}

############################################################################### BEGIN /etc/grub.d/00_header
#if [ -s $prefix/grubenv ]; then
	#set have_grubenv=true

	#load_env
#fi

#if [ "${next_entry}" ] ; then
	#set default="${next_entry}"

	#set next_entry=

	#save_env next_entry

	#set boot_once=true
#else
	#set default="0"
#fi

#if [ x"${feature_menuentry_id}" = xy ]; then
	#menuentry_id_option="--id"
#else
	#menuentry_id_option=""
#fi

#export menuentry_id_option

#if [ "${prev_saved_entry}" ]; then
	#set saved_entry="${prev_saved_entry}"

	#save_env saved_entry

	#set prev_saved_entry=

	#save_env prev_saved_entry

	#set boot_once=true
#fi

#if [ x$feature_default_font_path = xy ] ; then
	#font=unicode
#else
	#insmod part_msdos

	#insmod ext2

	#set root='hd2,msdos2'

	#if [ x$feature_platform_search_hint = xy ]; then
		#search --no-floppy --fs-uuid --set=root --hint-bios=hd2,msdos2 --hint-efi=hd2,msdos2 --hint-baremetal=ahci0,msdos1	XXX-XXX-XXX-XXX-XXX
	#else
		#search --no-floppy --fs-uuid --set=root XXX-XXX-XXX-XXX-XXX
	#fi

	#font="/usr/share/grub/unicode.pf2"
#fi

#loadfont unicode
loadfont "/usr/share/grub/unicode.pf2"

#if loadfont $font ; then
	#set gfxmode=auto
	set gfxmode=1024x768x8

	#load_video
	insmod all_video

	insmod gfxterm

	set locale_dir=$prefix/locale

	set lang=de_DE

	insmod gettext
#fi

terminal_output gfxterm

#terminal_input console
#terminal_output console

#if [ "${recordfail}" = 1 ] ; then
	#set timeout=30
#else
	#if [ x$feature_timeout_style = xy ] ; then
		set timeout_style=menu

		set timeout=0
	#else # Fallback normal timeout code in case the timeout_style feature is unavailable
		#set timeout=20
	#fi
#fi

############################################################################### BEGIN /etc/grub.d/05_debian_theme
set menu_color_normal=white/black
set menu_color_highlight=black/light-gray

############################################################################### BEGIN /etc/grub.d/10_linux
#if [ "${recordfail}" != 1 ]; then
	#if [ -e ${prefix}/gfxblacklist.txt ]; then
		#if hwmatch ${prefix}/gfxblacklist.txt 3; then
			#if [ ${match} = 0 ]; then
				#set linux_gfx_mode=keep
			#else
				#set linux_gfx_mode=text
			#fi
		#else
			#set linux_gfx_mode=text
		#fi
	#else
		#set linux_gfx_mode=keep
	#fi
#else
	#set linux_gfx_mode=text
#fi

#set linux_gfx_mode=keep

#export linux_gfx_mode

menuentry 'Ubuntu' --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option 'gnulinux-simple-XXX-XXX-XXX-XXX-XXX' {
	#recordfail

	#load_video

	#--------------------------------------------------------------------------
	# gfxmode $linux_gfx_mode

	#set gfxpayload=1024x768x8
	set gfxpayload=keep

	# set vt_handoff=vt.handoff=7 # !!!

	#--------------------------------------------------------------------------
	insmod gzio

	insmod part_msdos

	insmod ext2

	set root='hd2,msdos2'

	#if [ x$feature_platform_search_hint = xy ]; then
		#search --no-floppy --fs-uuid --set=root --hint-bios=hd2,msdos2 --hint-efi=hd2,msdos2 --hint-baremetal=ahci0,msdos1  XXX-XXX-XXX-XXX-XXX
	#else
		#search --no-floppy --fs-uuid --set=root XXX-XXX-XXX-XXX-XXX
	#fi

	linux /boot/vmlinuz-4.4.0-142-generic root=UUID=XXX-XXX-XXX-XXX-XXX ro fbcon=scrollback:2048k consoleblank=0 net.ifnames=0 random.trust_cpu=on apparmor=0 noapm # selinux=0 console=tty1 video=vga16fb:640x480-60 video=uvesafb:mode_option=1024x768-8,mtrr=3,scroll=ywrap vga=normal video=vesafb:ywrap video=vesafb:off,vesa:off,vga:off nofb video=VGA-1:1152x864M-32@75e drm.edid_firmware=edid/your_edid.bin drm_kms_helper.edid_firmware=edid/your_edid.bin nvidia-drm.modeset=1 splash $vt_handoff nomodeset vga=0x318 vga=792 nox2apic acpi=off noapic nolapic agp=off video=1024x768

	initrd /boot/initrd.img-4.4.0-142-generic
}

#menuentry "Windows 10" {
	#insmod ntfs

	#set root='hd1,msdos1'

	#ntldr /bootmgr
#}

#menuentry "OS X" {
	#insmod hfsplus
	#set root=(hd3,msdos1)
	#multiboot /boot
#}

menuentry 'Ubuntu, with Linux 4.4.0-142-generic (recovery mode)' --class ubuntu --class gnu-linux --class gnu --class os $menuentry_id_option 'gnulinux-4.4.0-142-generic-recovery-XXX-XXX-XXX-XXX-XXX' {
	#recordfail

	#load_video

	insmod gzio

	insmod part_msdos

	insmod ext2

	set root='hd2,msdos2'

	#if [ x$feature_platform_search_hint = xy ]; then
		#search --no-floppy --fs-uuid --set=root --hint-bios=hd2,msdos2 --hint-efi=hd2,msdos2 --hint-baremetal=ahci0,msdos1	XXX-XXX-XXX-XXX-XXX
	#else
		#search --no-floppy --fs-uuid --set=root XXX-XXX-XXX-XXX-XXX
	#fi

	echo 'Loading Linux 4.4.0-142-generic ...'

	linux /boot/vmlinuz-4.4.0-142-generic root=UUID=XXX-XXX-XXX-XXX-XXX ro single nomodeset fbcon=scrollback:512k

	echo 'Loading initial ramdisk ...'

	initrd /boot/initrd.img-4.4.0-142-generic
}

############################################################################### BEGIN /etc/grub.d/41_custom
#if [ -f	${config_directory}/custom.cfg ]; then
	#source ${config_directory}/custom.cfg
#elif [ -z "${config_directory}" -a -f	$prefix/custom.cfg ]; then
	#source $prefix/custom.cfg;
#fi
